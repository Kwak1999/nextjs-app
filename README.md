# ğŸ›’ ì¤‘ê³  ê±°ë˜ ì›¹ í”Œë«í¼

## 1. í”„ë¡œì íŠ¸ ì†Œê°œ (í•œ ì¤„ + 3ì¤„)
    1. í”„ë¡œì íŠ¸ ì†Œê°œ

    Next.js(App Router) ê¸°ë°˜ì˜ ì¤‘ê³  ê±°ë˜ ì›¹ í”Œë«í¼ìœ¼ë¡œ
    ìƒí’ˆ ë“±ë¡, ì¸ì¦/ì¸ê°€, ì‹¤ì‹œê°„ ì±„íŒ…, ìœ„ì¹˜ ê¸°ë°˜ ê±°ë˜ ê¸°ëŠ¥ì„ í¬í•¨í•œ
    ê°œì¸ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
    
    ê°•ì˜ë¥¼ ì°¸ê³ í•˜ë˜,
    ğŸ‘‰ ì¸ì¦ êµ¬ì¡° / ë°ì´í„° íë¦„ / ì‹¤ì‹œê°„ ê¸°ëŠ¥ì€ ì§ì ‘ ìˆ˜ì •Â·í™•ì¥í•˜ë©° êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
---
## 2. ê¸°íš ë°°ê²½ (ì™œ ë§Œë“¤ì—ˆëŠ”ì§€)
    ë‹¨ìˆœ CRUDê°€ ì•„ë‹Œ,

    âœ… ì¸ì¦/ì¸ê°€ êµ¬ì¡°
    
    âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ & ìœ„ì¹˜ ê¸°ë°˜ ê¸°ëŠ¥
    
    âœ… ì‹¤ì‹œê°„ ì‚¬ìš©ì ì¸í„°ë™ì…˜
    
    ì„ ëª¨ë‘ ê²½í—˜í•´ë³´ê³  ì‹¶ì–´ ê¸°íší•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
    
    íŠ¹íˆ **â€œNext.js App Router í™˜ê²½ì—ì„œ ì¸ì¦ + ì‹¤ì‹œê°„ ê¸°ëŠ¥ì„ ì–´ë–»ê²Œ ì•ˆì •ì ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆëŠ”ê°€â€**ì— ì´ˆì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤.
---
## 3. ì£¼ìš” ê¸°ëŠ¥
ğŸ” ì¸ì¦ / ì‚¬ìš©ì

- NextAuth ê¸°ë°˜ ë¡œê·¸ì¸

    - Google OAuth

    - Credentials ë¡œê·¸ì¸

- JWT ê¸°ë°˜ ì„¸ì…˜ ê´€ë¦¬

- middlewareë¥¼ í™œìš©í•œ í˜ì´ì§€ ì ‘ê·¼ ì œì–´

ğŸ› ìƒí’ˆ

- ìƒí’ˆ ë“±ë¡ / ì¡°íšŒ / ìƒì„¸ í˜ì´ì§€

- Cloudinary ì´ë¯¸ì§€ ì—…ë¡œë“œ

- ì¹´í…Œê³ ë¦¬ í•„í„°ë§

- ì¢‹ì•„ìš”(Favorite) ê¸°ëŠ¥

- í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„

ğŸ—º ìœ„ì¹˜ ê¸°ë°˜

- Kakao Map API ì—°ë™

- ìƒí’ˆ ë“±ë¡ ì‹œ ìœ„ì¹˜ ì„ íƒ

- ìƒì„¸ í˜ì´ì§€ ì§€ë„ í‘œì‹œ

ğŸ’¬ ì‹¤ì‹œê°„ ì±„íŒ…

- SWR ê¸°ë°˜ ì±„íŒ… ë°ì´í„° íŒ¨ì¹­

- optimistic UI ì ìš©

- ì´ë¯¸ì§€ ë©”ì‹œì§€ ì „ì†¡
---
## 4. ê¸°ìˆ  ìŠ¤íƒ & ì„ íƒ ì´ìœ 
    Frontend

    Next.js 15 (App Router)
    â†’ ì„œë²„ ì»´í¬ë„ŒíŠ¸ + ë°ì´í„° íŒ¨ì¹­ êµ¬ì¡° ì´í•´ ëª©ì 
    
    React 19 + TypeScript
    â†’ íƒ€ì… ì•ˆì •ì„±ê³¼ ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ì„±
    
    Backend / DB
    
    Prisma + PostgreSQL
    â†’ ê´€ê³„í˜• ë°ì´í„° ëª¨ë¸ë§ ê²½í—˜
    
    Route Handler(API)
    â†’ í”„ë¡ íŠ¸/ë°± í†µí•© êµ¬ì¡° ì´í•´
    
    Auth / State
    
    NextAuth
    â†’ ì‹¤ë¬´ì—ì„œ ê°€ì¥ ë§ì´ ì“°ì´ëŠ” ì¸ì¦ ë¼ì´ë¸ŒëŸ¬ë¦¬
    
    SWR
    â†’ ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™” + optimistic update
    
    Infra / Etc
    
    Cloudinary (ì´ë¯¸ì§€)
    
    Kakao Map API
    
    Docker (PostgreSQL ë¡œì»¬ í™˜ê²½)
---
## 5. ì•„í‚¤í…ì²˜ / í´ë” êµ¬ì¡° ì„¤ëª…
    src/
    â”œâ”€ app/                       # Next.js App Router ê¸°ë°˜ í˜ì´ì§€ & API
    â”‚  â”œâ”€ (home)/                 # í™ˆ í˜ì´ì§€ (ê·¸ë£¹ ë¼ìš°íŠ¸)
    â”‚  â”‚   â”œâ”€ page.tsx
    â”‚  â”‚   â””â”€ loading.tsx
    â”‚  â”‚
    â”‚  â”œâ”€ actions/                # ì„œë²„ ì „ìš© ë°ì´í„° íŒ¨ì¹­ í•¨ìˆ˜
    â”‚  â”‚   â”œâ”€ getCurrentUser.ts   # ë¡œê·¸ì¸ ìœ ì € ì¡°íšŒ
    â”‚  â”‚   â”œâ”€ getProductById.ts   # ìƒí’ˆ ìƒì„¸ ì¡°íšŒ
    â”‚  â”‚   â””â”€ getProducts.ts      # ìƒí’ˆ ëª©ë¡ ì¡°íšŒ (í•„í„°/í˜ì´ì§€ë„¤ì´ì…˜)
    â”‚  â”‚
    â”‚  â”œâ”€ admin/                  # ê´€ë¦¬ì ì˜ì—­
    â”‚  â”‚   â””â”€ panel/
    â”‚  â”‚       â””â”€ page.tsx
    â”‚  â”‚
    â”‚  â”œâ”€ api/                    # Route Handler (Backend API)
    â”‚  â”‚   â”œâ”€ chat/route.ts       # ì±„íŒ… ë©”ì‹œì§€ API
    â”‚  â”‚   â”œâ”€ favorites/          # ì¢‹ì•„ìš” ê¸°ëŠ¥ API
    â”‚  â”‚   â”œâ”€ products/route.ts   # ìƒí’ˆ CRUD API
    â”‚  â”‚   â””â”€ register/route.ts   # íšŒì›ê°€ì… API
    â”‚  â”‚
    â”‚  â”œâ”€ auth/                   # ì¸ì¦ ê´€ë ¨ í˜ì´ì§€
    â”‚  â”‚   â”œâ”€ login/page.tsx
    â”‚  â”‚   â””â”€ register/page.tsx
    â”‚  â”‚
    â”‚  â”œâ”€ chat/                   # ì‹¤ì‹œê°„ ì±„íŒ… í˜ì´ì§€
    â”‚  â”‚   â”œâ”€ ChatClient.tsx
    â”‚  â”‚   â”œâ”€ page.tsx
    â”‚  â”‚   â””â”€ loading.tsx
    â”‚  â”‚
    â”‚  â”œâ”€ components/             # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
    â”‚  â”‚   â”œâ”€ categories/         # ì¹´í…Œê³ ë¦¬ UI
    â”‚  â”‚   â”‚   â”œâ”€ Categories.tsx
    â”‚  â”‚   â”‚   â”œâ”€ CategoryBox.tsx
    â”‚  â”‚   â”‚   â””â”€ CategoryInput.tsx
    â”‚  â”‚   â”‚
    â”‚  â”‚   â”œâ”€ chat/               # ì±„íŒ… UI ì»´í¬ë„ŒíŠ¸
    â”‚  â”‚   â”‚   â”œâ”€ Chat.tsx
    â”‚  â”‚   â”‚   â”œâ”€ ChatHeader.tsx
    â”‚  â”‚   â”‚   â”œâ”€ Contacts.tsx
    â”‚  â”‚   â”‚   â”œâ”€ Input.tsx
    â”‚  â”‚   â”‚   â”œâ”€ Message.tsx
    â”‚  â”‚   â”‚   â””â”€ User.tsx
    â”‚  â”‚   â”‚
    â”‚  â”‚   â”œâ”€ products/           # ìƒí’ˆ UI ì»´í¬ë„ŒíŠ¸
    â”‚  â”‚   â”‚   â”œâ”€ ProductCard.tsx
    â”‚  â”‚   â”‚   â”œâ”€ ProductCategory.tsx
    â”‚  â”‚   â”‚   â”œâ”€ ProductHead.tsx
    â”‚  â”‚   â”‚   â””â”€ ProductInfo.tsx
    â”‚  â”‚   â”‚
    â”‚  â”‚   â”œâ”€ Avatar.tsx
    â”‚  â”‚   â”œâ”€ Button.tsx
    â”‚  â”‚   â”œâ”€ Container.tsx
    â”‚  â”‚   â”œâ”€ EmptyState.tsx
    â”‚  â”‚   â”œâ”€ FloatingButton.tsx
    â”‚  â”‚   â”œâ”€ Heading.tsx
    â”‚  â”‚   â”œâ”€ HeartButton.tsx
    â”‚  â”‚   â”œâ”€ ImageUpload.tsx
    â”‚  â”‚   â”œâ”€ Input.tsx
    â”‚  â”‚   â”œâ”€ KakaoMap.tsx
    â”‚  â”‚   â”œâ”€ Loader.tsx
    â”‚  â”‚   â”œâ”€ Navbar.tsx
    â”‚  â”‚   â”œâ”€ NavItem.tsx
    â”‚  â”‚   â”œâ”€ Pagination.tsx
    â”‚  â”‚   â”œâ”€ PaginationLink.tsx
    â”‚  â”‚   â””â”€ ToastProvider.tsx
    â”‚  â”‚
    â”‚  â”œâ”€ hooks/                  # ì»¤ìŠ¤í…€ í›…
    â”‚  â”‚   â””â”€ useFavorite.ts      # ì¢‹ì•„ìš” ìƒíƒœ ê´€ë¦¬
    â”‚  â”‚
    â”‚  â”œâ”€ products/               # ìƒí’ˆ ê´€ë ¨ í˜ì´ì§€
    â”‚  â”‚   â”œâ”€ [productId]/        # ìƒí’ˆ ìƒì„¸
    â”‚  â”‚   â”‚   â”œâ”€ page.tsx
    â”‚  â”‚   â”‚   â”œâ”€ loading.tsx
    â”‚  â”‚   â”‚   â””â”€ ProductClient.tsx
    â”‚  â”‚   â””â”€ upload/             # ìƒí’ˆ ë“±ë¡
    â”‚  â”‚       â”œâ”€ page.tsx
    â”‚  â”‚       â””â”€ loading.tsx
    â”‚  â”‚
    â”‚  â”œâ”€ user/                   # ìœ ì € í˜ì´ì§€
    â”‚  â”‚   â””â”€ page.tsx
    â”‚  â”‚
    â”‚  â”œâ”€ globals.css
    â”‚  â”œâ”€ layout.tsx              # ì „ì—­ ë ˆì´ì•„ì›ƒ (Navbar, Toast, Script)
    â”‚  â””â”€ favicon.ico
    â”‚
    â”œâ”€ helpers/                   # ê³µí†µ ìœ í‹¸ í•¨ìˆ˜
    â”‚  â”œâ”€ dayjs.ts                # ë‚ ì§œ í¬ë§· ìœ í‹¸
    â”‚  â”œâ”€ previewImage.ts         # ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
    â”‚  â”œâ”€ uploadImage.ts          # ì´ë¯¸ì§€ ì—…ë¡œë“œ
    â”‚  â””â”€ prismadb.ts             # Prisma Client
    â”‚
    â”œâ”€ pages/                     # NextAuth ì „ìš© pages router
    â”‚  â””â”€ api/auth/[...nextauth].ts
    â”‚
    â”œâ”€ types/                     # ì „ì—­ íƒ€ì… ì •ì˜
    â”‚  â”œâ”€ index.ts
    â”‚  â”œâ”€ constants.ts
    â”‚  â””â”€ next-auth.d.ts
    â”‚
    â””â”€ middleware.ts              # ì¸ì¦/ê¶Œí•œ ë¯¸ë“¤ì›¨ì–´
---
## 6. ì–´ë ¤ì› ë˜ ë¬¸ì œ & í•´ê²°
â— ë¬¸ì œ 1: NextAuth + App Router ì„¸ì…˜ íë¦„ í˜¼ë€

- server / client ê°„ session undefined ë°œìƒ

- adapter ë²„ì „ ì°¨ì´ ì´ìŠˆ

âœ… í•´ê²°

- getServerSession ê¸°ë°˜ currentUser íŒ¨í„´ ì •ë¦½

- ì¸ì¦ íë¦„ì„ server â†’ props â†’ clientë¡œ ëª…í™•íˆ ë¶„ë¦¬

â— ë¬¸ì œ 2: ì±„íŒ… ë©”ì‹œì§€ ë°©í–¥ & íŠ¹ìˆ˜ë¬¸ì ê¹¨ì§

- direction: rtl ì‚¬ìš© ì‹œ "ì•ˆë…•!" â†’ "!ì•ˆë…•" ë¬¸ì œ ë°œìƒ

âœ… í•´ê²°

- layoutì€ flex-row-reverseë¡œ ì²˜ë¦¬

- í…ìŠ¤íŠ¸ëŠ” dir="auto" ì ìš©

â— ë¬¸ì œ 3: ì‹¤ì‹œê°„ ì±„íŒ… UX ì§€ì—°

- ë©”ì‹œì§€ ì „ì†¡ í›„ í™”ë©´ ë°˜ì˜ ë”œë ˆì´

âœ… í•´ê²°

- SWR mutate + optimisticData ì ìš©

- ì‹¤íŒ¨ ì‹œ rollback ì²˜ë¦¬
---
## 7. ê°œì„ í•˜ê³  ì‹¶ì€ ì 
    ì±„íŒ… WebSocket(Socket.io) ì „í™˜
    
    ë¬´í•œ ìŠ¤í¬ë¡¤ ì ìš©
    
    ì–´ë“œë¯¼ í˜ì´ì§€ ê³ ë„í™”
    
    í…ŒìŠ¤íŠ¸ ì½”ë“œ(Jest / Playwright) ì¶”ê°€
---

## ê°€ì´ë“œ

```bash
# Next.js ì•± ìƒì„±
npx create-next-app@latest --typescript

# ë¹Œë“œ ë° ì‹¤í–‰
npm run build
npm run dev

# Prisma ì„¤ì¹˜ ë° ì´ˆê¸°í™”
npm install -D prisma
npx prisma init

# ìŠ¤í‚¤ë§ˆ push
npx prisma db push

# NextAuth & Prisma ì—°ë™
npm install next-auth @prisma/client @next-auth/prisma-adapter

# React Hook Form
npm install react-hook-form

# React Icons
npm i react-icons

# axios
npm i axios

# bcryptjs
npm install bcryptjs

# next-cloudinary
npm install next-cloudinary

# kakao-maps-sdk
npm i react-kakao-maps-sdk

#toastify
npm i react-toastify

#dayjs
npm i dayjs

#pagination
npm i @lucasmogari/react-pagination

#query-string
npm i query-string

#swr
npm i swr
```

---

<details>
<summary>âš™ï¸ NextAuth + Prisma ë²„ì „ ì¶©ëŒ ì˜¤ë¥˜ í•´ê²° ê¸°ë¡</summary>

## âš ï¸ ì˜¤ë¥˜ ê°œìš”
NextAuth ì‹¤í–‰ ì¤‘ ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ ë°œìƒ:

```
[next-auth][error][CLIENT_FETCH_ERROR]
https://next-auth.js.org/errors#client_fetch_error

"Unexpected token '<', "<!DOCTYPE "... is not valid JSON"
```

â†’ **NextAuth í´ë¼ì´ì–¸íŠ¸ê°€ HTML ì‘ë‹µì„ ë°›ì•„ì„œ ë°œìƒí•œ ë¬¸ì œ**  
ì›ì¸ì€ **Prisma ë° Adapter ë²„ì „ ë¶ˆì¼ì¹˜**

---

## ğŸ” ì›ì¸ ë¶„ì„
1. `@auth/prisma-adapter`, `@next-auth/prisma-adapter`, `@prisma/client`, `prisma` ë²„ì „ ê°„ í˜¸í™˜ì„± ë¬¸ì œ
2. Adapterì™€ Prisma ë²„ì „ ì°¨ì´ë¡œ DB ì—°ê²° ì‹œ JSON íŒŒì‹± ì‹¤íŒ¨
3. í´ë¼ì´ì–¸íŠ¸ê°€ `< !DOCTYPE ...>` HTML ì‘ë‹µì„ ë°›ì•„ `"Unexpected token '<'"` ë°œìƒ

---

## ğŸ§¾ ìˆ˜ì • ì „ `package.json`

<details>
<summary>ìì„¸íˆ ë³´ê¸°</summary>

```json
{
  "dependencies": {
    "@auth/prisma-adapter": "^2.11.0",
    "@next-auth/prisma-adapter": "^1.0.7",
    "@prisma/client": "^4.16.2",
    "@prisma/extension-accelerate": "^2.0.2",
    "next": "15.5.6",
    "next-auth": "^4.22.1",
    "react": "19.1.0",
    "react-dom": "19.1.0"
  },
  "devDependencies": {
    "prisma": "^6.18.0",
    "typescript": "^5"
  }
}
```
</details>

---

## âœ… ìˆ˜ì • í›„ `package.json`

<details>
<summary>ìì„¸íˆ ë³´ê¸°</summary>

```json
{
  "dependencies": {
    "@auth/prisma-adapter": "^2.11.0",
    "@next-auth/prisma-adapter": "^1.0.6",
    "@prisma/client": "^4.13.0",
    "@prisma/extension-accelerate": "^2.0.2",
    "next": "15.5.6",
    "next-auth": "^4.22.1",
    "react": "19.1.0",
    "react-dom": "19.1.0"
  },
  "devDependencies": {
    "prisma": "^4.13.0",
    "typescript": "^5"
  }
}
```
</details>

---

### ğŸ”¸ ì£¼ìš” ë³€ê²½ì 
- `@next-auth/prisma-adapter` â†’ `^1.0.6`
- `@prisma/client` â†’ `^4.13.0`
- `prisma` â†’ `^4.13.0`

---

### ğŸ§  ì½”ë“œ ìˆ˜ì • ë‚´ìš©

`[...nextauth].ts`ì˜ Prisma import ê²½ë¡œ ìˆ˜ì •:

```diff
- import { PrismaClient } from "@prisma/client";
+ import { PrismaClient } from "@/generated/prisma";
```

(`schema.prisma`ì˜ `generator output`ì´ `./src/generated/prisma`ë¡œ ì„¤ì •ë˜ì–´ ìˆìŒ)

</details>
